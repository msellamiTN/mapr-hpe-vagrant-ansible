ASK [../roles/mapr-configure-nativesecurity-secure-genkeys : Configure.sh to generate keys only run on first mapr-cldb node] ***
fatal: [mapr-master]: FAILED! => {"changed": true, "cmd": "/opt/mapr/server/configure.sh -N demo.mapr.com -Z master.htc-ezmeral.local -C master.htc-ezmeral.local -u mapr -g mapr -genkeys -secure -dare -HS master.htc-ezmeral.local ", "delta": "0:00:32.205448", "end": "2024-01-17 16:30:21.968108", "msg": "non-zero return code", "rc": 1, "start": "2024-01-17 16:29:49.762660", "stderr": "", "stderr_lines": [], "stdout": "create /opt/mapr/conf/conf.old\nNode setup configuration:  cldb fileserver gateway hadoop-client hadoop-util historyserver resourcemanager zookeeper\nLog can be found at:  /opt/mapr/logs/configure.log\nCLDB node list: master.htc-ezmeral.local:7222\nZookeeper node list: master.htc-ezmeral.local:5181\nExternal Zookeeper node list: \nPKCS#11 label not specified. Defaulting to HPE Ezmeral Data Fabric\nSO PIN not specified. Using default SO PIN of 1234\nInitializing PKCS#11 store with label HPE Ezmeral Data Fabric with store type file\nObtained cluster name demo.mapr.com from mapr-clusters.conf\nNo keys can be found in either the file store or cldb.key/dare.master.key.\nSuccessfully generated Core KEK, UUID 4e4f469b-e922-c0d7-b2af-a4a5cc65a30e\nSHA-256 checksum for Core KEK is F768B4BCEAD717F5C9D11E39632C23F5CAB3D75F5848B5BB323CEB9F8A24A5E1\nSuccessfully generated Common KEK, UUID a18ab742-b191-609f-8f7a-a2874754e930\nSHA-256 checksum for Common KEK is 5BA7738D9C6A4340752F6530DCE38097B3A9E77F4688D21A5C5B69848BC273B9\nSHA-256 checksum for CLDB key is 08B8ABBD046C4F9D2F6C0E3576F1B0AF1AFB57A4A533621DEF6C65F8CE989500\nSuccessfully set encrypted CLDB key in configuration\nSHA-256 checksum for DARE key is 615E20863212B162557FAA43A1E9B8D8A5361F61D4655C9595AD5597FFCAFB3D\nSuccessfully set encrypted DARE key in configuration\n##############################################################################\nCopy the entire contents of the token directory /opt/mapr/conf/tokens to\nall CLDB and Zookeeper nodes. All files in /opt/mapr/conf/tokens must be owned\nby the mapr user and mapr group.\n##############################################################################\n##############################################################################\n    NOTE: /opt/mapr/conf/tokens directory contains the master key for data\n    at rest encryption. Dare Master Key should be safely backed up. Without\n    Dare Master Key, cluster cannot be started and data cannot be accessed.\n##############################################################################\nERROR: Domain name not set - need to make sure the node is configured with a fully qualified domain name\nERROR: could not generate ssl keys. See log file for more details", "stdout_lines": ["create /opt/mapr/conf/conf.old", "Node setup configuration:  cldb fileserver gateway hadoop-client hadoop-util historyserver resourcemanager zookeeper", "Log can be found at:  /opt/mapr/logs/configure.log", "CLDB node list: master.htc-ezmeral.local:7222", "Zookeeper node list: master.htc-ezmeral.local:5181", "External Zookeeper node list: ", "PKCS#11 label not specified. Defaulting to HPE Ezmeral Data Fabric", "SO PIN not specified. Using default SO PIN of 1234", "Initializing PKCS#11 store with label HPE Ezmeral Data Fabric with store type file", "Obtained cluster name demo.mapr.com from mapr-clusters.conf", "No keys can be found in either the file store or cldb.key/dare.master.key.", "Successfully generated Core KEK, UUID 4e4f469b-e922-c0d7-b2af-a4a5cc65a30e", "SHA-256 checksum for Core KEK is F768B4BCEAD717F5C9D11E39632C23F5CAB3D75F5848B5BB323CEB9F8A24A5E1", "Successfully generated Common KEK, UUID a18ab742-b191-609f-8f7a-a2874754e930", "SHA-256 checksum for Common KEK is 5BA7738D9C6A4340752F6530DCE38097B3A9E77F4688D21A5C5B69848BC273B9", "SHA-256 checksum for CLDB key is 08B8ABBD046C4F9D2F6C0E3576F1B0AF1AFB57A4A533621DEF6C65F8CE989500", "Successfully set encrypted CLDB key in configuration", "SHA-256 checksum for DARE key is 615E20863212B162557FAA43A1E9B8D8A5361F61D4655C9595AD5597FFCAFB3D", "Successfully set encrypted DARE key in configuration", "##############################################################################", "Copy the entire contents of the token directory /opt/mapr/conf/tokens to", "all CLDB and Zookeeper nodes. All files in /opt/mapr/conf/tokens must be owned", "by the mapr user and mapr group.", "##############################################################################", "##############################################################################", "    NOTE: /opt/mapr/conf/tokens directory contains the master key for data", "    at rest encryption. Dare Master Key should be safely backed up. Without", "    Dare Master Key, cluster cannot be started and data cannot be accessed.", "##############################################################################", "ERROR: Domain name not set - need to make sure the node is configured with a fully qualified domain name", "ERROR: could not generate ssl keys. See log file for more details"]}

PLAY RECAP *********************************************************************
mapr-edge                  : ok=112  changed=12   unreachable=0    failed=0    skipped=57   rescued=0    ignored=0   
mapr-master                : ok=112  changed=13   unreachable=0    failed=1    skipped=51   rescued=0    ignored=0   
mapr-worker1               : ok=112  changed=11   unreachable=0    failed=0    skipped=57   rescued=0    ignored=0   
